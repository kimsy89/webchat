# Web Chatting
웹 기반 채팅



## 목표
(우선은 대화 내용 저장 기능은 제외하고 작업.)

- 주요 기능
	- 1:1 채팅이 가능 / 구현 완료
	- 다:다 채팅이 가능 / 구현 완료
	- 노드 웹킷 사용하여 일반 프로그램처럼 동작
	- 크롬 notification 연동 / 구현 완료

- 부가 기능
	- 대화 확인 체크
	- 개인정보 변경
	- 비밀방
	- 파일전송



## STEP
1. 로그인
2. 대쉬보드(user list, room list)
3. 채팅



## TODO (functional)
- 주요 기능
	- //크롬 notification 연동
	- node webkit 적용
	- google auth 연동 할 모듈.만들기. (모듈로 만들어서 옵션값 true, false로 사용할 수 있게끔.)
	- //대화방에 현재 대화 참여자 목록 나타내기.
	- 팝업형으로 변경했을 때, 임의로 팝업을 지우고 기능을 사용하려 할 때 유효성 처리.

- 부가 기능
	- //대화방에 입장하였을 때, 세션에 userId 정보가 없으면 login 페이지로 이동하기.
	- //online user 리스트에 socket 연결된 유저 나타내기.
	- //새로고침 시에 disconnect 이벤트를 발생시켜 서버에 있는 배열에서 제거하고, 나타내기
	- //유저를 더블클릭 시 방 개설, 그리고 입장 되도록 변경.
	- //유저가 상대방과의 1:1 대화방을 개설한 후, 대화를 보내면 상대방이 자동으로 접속되도록. 처리.
	- //채팅방에서 나가거나, 채팅방을 껐을 때 대화방에 알림 나타내기.(ex: 대화방을 나가셨습니다. 이런..)
	- //대화방에 유저 초대
	- 이름 변경 + 프로필 수정 영역 만들기.
	- 파일 전송.
	- 비밀방 만들기.
	- 대화 확인 체크(네톤과 카톡의 1 같은 거.)
	- //시간 나타내기

- 에러
	- pc와 태블릿 크롬 브라우저끼리 연결할 때, updateMember의 other 값을 못가져옴. 확인 필요.



## TODO (UI)
- 행아웃 참고
- 로그인 페이지를 따로 두지 말고, 팝업으로 하여 대쉬보드에 블러처리하고 위에 띄우기.
- 컬러 톤 변경



## TODO (기타)
- 다이어그램 만들기
- 문서화 하기



## 데이터베이스
- USER
	1. 구글auth 연동하여 가져온 데이터를 저장,
	2. 1안이 구현이 늦는다면, 유저가 로그인을 하면, 그 때 유저 정보를 db에 저장.

- ROOM
	1. 유저 끼리 대화를 시작했을 때, 이전 기록이 있다면 db에서 그 정보를 가져오고, 없으면 새로 저장.



## 궁금증.
- 2015/02/26
	- //auth 연동해서 알서포트 직원 리스트를 몽땅 추출할 수 있는가? O
	- //추출할 수 있다면, db에 저장해놓고 db에서 가져오는 것과 어떤 차이가 있으며, 어떤 방법이 좋을까? 
		- 어차피 추출해서 DB에 넣어야 할 것 같음. 아닌가?
	- //방 안에 유저들이 없으면 방을 삭제할 것인가? 유지할 것인가? 
		- 추후 고려.
	- //방을 따로 개설해서 사람들이 들어오게 할 것인가? url 공유나 등등.. > 수동적 > 위의 질문과 같은 맥락 
		- 네이트온 방식으로.
	- //네이트온 처럼 방을 따로 개설하는게 아니라, 유저가 한 명 이상 있어야 방이 개설되도록 할 것인가? 
		- 네이트온 처럼.
	- //대화 내용을 저장할 것인가?
		- 1차 개발에서는 제외
	- 직원 리스트의 온라인 / 오프라인 / 부재중(온라인인데, 자리에 없음) 의 상태 표시가 필요한가?
	- 위의 상태 표시가 필요하다면 기준을 어떻게 정할 것인가? (ex: 온라인 = auth 로그인한 상태)

- 2015/03/05
	- //dashboard에서 새로고침시 uniq id. (socket.id) 가 바뀐다.
		- 유저의 고유 id는 소켓 id가 아닌 이메일. 소켓 id는 그냥 연결해주는 토큰.
	- disconnect 시점? 